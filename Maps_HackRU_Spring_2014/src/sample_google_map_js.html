<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnDgFGCzZLZwBCl4r45NKW8ylutfW93rM&sensor=false">
    </script>

	<script type="text/javascript"
		src="js/jquery-1.11.0.js">
 	</script>
    
	<script type="text/javascript"
		src="js/osm2geo.js">
 	</script>    
    
    <script type="text/javascript"
      src="js/xmlToJson.js">
    </script>

    <script type="text/javascript" 
    	src="js/ObjTree.js">
    </script>

    <script type="text/javascript" 
    	src="js/GeoJSON.js">
    </script>
    
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(40.49957, -74.44824),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.SATELITE
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
            
        <!--var polyline = new GPolyline([-->
  		var polyline = new google.maps.Polyline({
  			path: [	new google.maps.LatLng(40.52379, -74.46433),
  					new google.maps.LatLng(40.52394, -74.46422)],
			geodesic: true,
			strokeColor: '#FF0000',
			strokeOpacity: 1.0,
			strokeWeight: 2
		});
		
		<!--polyline.setMap(map);-->
		
		<!--map.addOverlay(polyline);-->

    <!-- paint polygon -->
    // GeoJSON Polygon
	var geojsonpolygon = {
    "type": "LineString",  
     "coordinates": [
     	[40.50342,-74.45215],
     	[40.50322,-74.45196],
     	[40.50499,-74.4509099],
     	[40.5053399,-74.45144],
     	[40.50549,-74.4517],
     	[40.50562,-74.45181],
     	[40.50575,-74.4518499],
     	[40.5062,-74.4518],
     	[40.50641,-74.45191],
     	[40.50653,-74.45211],
     	[40.50659,-74.45235],
     	[40.5066,-74.45249],
     	[40.50667,-74.45342],
     	[40.50678,-74.45443],
     	[40.5068399,-74.45519],
     	[40.50706,-74.45635],
     	[40.50745,-74.45737],
     	[40.50755,-74.45754],
     	[40.50789,-74.4579399],
     	[40.50815,-74.45823],
     	[40.50866,-74.4586],
     	[40.50898,-74.45878],[40.50963,-74.4589699],[40.50997,-74.459],[40.51016,-74.45901],[40.51131,-74.4589],[40.5124799,-74.45877],
     	[40.51324,-74.45859],[40.51396,-74.45824],[40.51456,-74.45782],[40.51511,-74.45728],[40.5153899,-74.45694],[40.51569,-74.45656],
     	[40.51674,-74.45486],[40.51688,-74.45469],[40.51712,-74.4541799],[40.51735,-74.4537299],[40.5174,-74.45312],[40.51718,-74.45262],
     	[40.51684,-74.45242],[40.51656,-74.45238],[40.5162199,-74.45254],[40.51612,-74.45283],[40.51608,-74.45318],[40.51609,-74.45356],
     	[40.51624,-74.45397],[40.51682,-74.45463],[40.51688,-74.45469],[40.51715,-74.4549399],[40.5173599,-74.45523],[40.51762,-74.45598],
     	[40.5176299,-74.45654],[40.51758,-74.45698],[40.5174499,-74.45734],[40.5167,-74.45846],[40.51653,-74.45884],[40.51648,-74.45933],
     	[40.51648,-74.45937],[40.51636,-74.45938],[40.51608,-74.45941],[40.51587,-74.4595],[40.51574,-74.45968],[40.51546,-74.46071],
     	[40.51522,-74.46155],[40.51514,-74.46192],[40.51506,-74.46231],[40.51502,-74.4625499],[40.51499,-74.46308],[40.51498,-74.46332],
     	[40.51487,-74.46485],[40.51485,-74.46522],[40.51459,-74.46646],[40.51457,-74.4665],[40.51446,-74.46652],[40.51441,-74.46648],
     	[40.51436,-74.4663099],[40.50696,-74.45686],[40.5067499,-74.4561499],[40.50671,-74.45547],[40.50658,-74.45501],[40.50648,-74.45447],
     	[40.50633,-74.4540899],[40.5062,-74.45383],[40.50612,-74.45353],[40.50604,-74.4530599],[40.50599,-74.45276],[40.50594,-74.45266],
     	[40.50588,-74.45267],[40.50584,-74.45271],[40.50578,-74.45282],[40.5051599,-74.45387],[40.50511,-74.45387],[40.50506,-74.4538199],[40.50378,-74.45252]
    ]
}
// GeoJSON Point
var geojsonpoint = {
    "type": "Point",
    "coordinates": [
        40.502120612605904, 
        -74.442875219905184
    ]
}

//options
	var geojsonpolygonoptions =
    {
    "strokeColor": "#FFFF00",
    "strokeOpacity": 1,
    "strokeWeight": 5,
    "fillColor": "#FFFF00",
    "fillOpacity": 1
}
// google.maps.Marker
var geojsonmarkeroptions = {
    "icon": "img/marker-house.png"
}
  	
    var myGoogleVector = new GeoJSON(geojsonpolygon, geojsonpolygonoptions);
	<!--var myGoogleVector = new GeoJSON(geojsonpoint, geojsonpolygonoptions);-->

function drawLine(geojsonlinestring) {
	
	var geojsontype;
	var googlemapsLatLng = new Array();
	var busRoute;
	
	geojsontype = geojsonlinestring.type;
	
	if(geojsontype == "LineString") {
		var currentGeoJSONLngLat;
		var currentLatLngFlip;
		for(var i=0; i<geojsonlinestring.coordinates.length; i++) {
			currentLatLngFlip = geojsonlinestring.coordinates[i];
			<!--console.log(currentLatLngFlip[1], currentLatLngFlip[0]);-->
			googlemapsLatLng[i] = new google.maps.LatLng(currentLatLngFlip[0], currentLatLngFlip[1]);
		}
		
		busRoute = new google.maps.Polyline({
    		path: googlemapsLatLng,
    		geodesic: true,
    		strokeColor: '#FF0000',
    		strokeOpacity: 1.0,
    		strokeWeight: 5
		});
	}
	
	if(geojsontype == "Point") {
		var currentGeoJSONLngLat;
		var currentLatLngFlip;
		for(var i=0; i<geojsonlinestring.coordinates.length; i++) {
			currentLatLngFlip = geojsonlinestring.coordinates[i];
			<!--console.log(currentLatLngFlip[1], currentLatLngFlip[0]);-->
			var myLatlng = new google.maps.LatLng(currentLatLngFlip[0], currentLatLngFlip[1]);
			new google.maps.Marker({
      			position: myLatlng,
      			map: map,
      			title: ''
  			});
		}
	}
	
	return busRoute;
}

<!--
if (myGoogleVector.error){
    console.log("error: "+myGoogleVector.error);
}else{
    myGoogleVector.setMap(map);
}
-->
	var busRoute = drawLine(geojsonpolygon);
	busRoute.setMap(map);
	
	var geojsonlinestring2 = {"type":"Point","coordinates":[[40.51871,-74.45998],[40.51863,-74.46001],[40.51856,-74.46005],[40.51807,-74.4607599],[40.51803,-74.4608],[40.51799,-74.46088],[40.51798,-74.46098],[40.51796,-74.46107],[40.51796,-74.46116],[40.51799,-74.46126],[40.51799,-74.4613],[40.51799,-74.46138],[40.51796,-74.46146],[40.51794,-74.46149],[40.51787,-74.46154],[40.51778,-74.46155],[40.51773,-74.46153],[40.5177,-74.46151],[40.51767,-74.46148],[40.51764,-74.46142],[40.51762,-74.4613],[40.51744,-74.46109],[40.51734,-74.4610299],[40.51717,-74.46089],[40.51693,-74.46064],[40.51677,-74.46041],[40.51668,-74.46028],[40.51658,-74.46003],[40.51649,-74.45976],[40.51644,-74.45946],[40.51644,-74.45939],[40.51644,-74.45933],[40.51644,-74.45917],[40.51648,-74.45882],[40.51663,-74.45844],[40.5170699,-74.45779],[40.51743,-74.45726],[40.51752,-74.45697],[40.51753,-74.45668],[40.5175,-74.45648],[40.51746,-74.45632],[40.51742,-74.45622],[40.51739,-74.45617],[40.51729,-74.45601],[40.51718,-74.45591],[40.51709,-74.45583],[40.51695,-74.45578],[40.5168,-74.45575],[40.51666,-74.45577],[40.51653,-74.45581],[40.51639,-74.45589],[40.5161,-74.4562],[40.51593,-74.45647],[40.51575,-74.4567299],[40.51538,-74.45721],[40.5150999,-74.45751],[40.51496,-74.45766],[40.51458,-74.45799],[40.5141599,-74.45831],[40.51389,-74.45846],[40.51362,-74.45858],[40.51337,-74.45868],[40.5129499,-74.45882],[40.51273,-74.4588799],[40.51261,-74.4589],[40.51234,-74.45895],[40.51205,-74.45898],[40.5105099,-74.45909],[40.51008,-74.45912],[40.50981,-74.45913],[40.50956,-74.45914],[40.50903,-74.4590599],[40.50864,-74.45889],[40.50827,-74.45863],[40.50784,-74.45825],[40.50741,-74.45773],[40.50696,-74.45686],[40.5067499,-74.4561499],[40.50671,-74.45547],[40.50658,-74.45501],[40.50648,-74.45447],[40.50633,-74.4540899],[40.5062,-74.45383],[40.50612,-74.45353],[40.50604,-74.4530599],[40.50599,-74.45276],[40.50594,-74.45266],[40.50588,-74.45267],[40.50584,-74.45271],[40.50578,-74.45282],[40.5051599,-74.45387],[40.50511,-74.45387],[40.50506,-74.4538199],[40.50378,-74.45252],[40.51448,-74.46615],[40.5145399,-74.46611],[40.5146,-74.46603],[40.51469,-74.4658199],[40.51479,-74.4652],[40.51482,-74.46485],[40.51491,-74.46373],[40.51493,-74.46335],[40.51499,-74.46328],[40.5153899,-74.46307],[40.51747,-74.4616],[40.51759,-74.4615],[40.51764,-74.46142],[40.51764,-74.4613],[40.51766,-74.46113],[40.51778,-74.46105],[40.5179,-74.46109],[40.51799,-74.46126],[40.51827,-74.46139],[40.51853,-74.46144],[40.51863,-74.46146],[40.52379,-74.46433],[40.52394,-74.46422],[40.52612,-74.46569],[40.5262,-74.46583],[40.52192,-74.46326],[40.52199,-74.46344],[40.52203,-74.46362],[40.52272,-74.46575],[40.52277,-74.4658],[40.5231,-74.46561],[40.5233599,-74.46533],[40.5235399,-74.46511],[40.52364,-74.46487],[40.52368,-74.46446],[40.52368,-74.4644],[40.52379,-74.46433],[40.5262,-74.46583],[40.52672,-74.46681],[40.52682,-74.46684],[40.52831,-74.46551],[40.5283299,-74.46543],[40.52831,-74.46533],[40.52783,-74.46437],[40.52773,-74.46418],[40.52699,-74.4627299],[40.52684,-74.46233],[40.52634,-74.4604],[40.52624,-74.46003],[40.5259,-74.45896],[40.52189,-74.46319],[40.52192,-74.46326],[40.5256,-74.4579399],[40.5254199,-74.45796],[40.52529,-74.45795],[40.52518,-74.45788],[40.52509,-74.45778],[40.52457,-74.45859],[40.52442,-74.45875],[40.5242999,-74.45886],[40.52416,-74.45881],[40.5240099,-74.45854],[40.52386,-74.45826],[40.52364,-74.45808],[40.5236,-74.45806],[40.51514,-74.46192],[40.51506,-74.46231],[40.51502,-74.4625499],[40.51499,-74.46308],[40.51498,-74.46332],[40.51487,-74.46485],[40.51485,-74.46522],[40.51459,-74.46646],[40.51457,-74.4665],[40.51446,-74.46652],[40.51441,-74.46648],[40.51436,-74.4663099],[40.51885,-74.4596399],[40.51882,-74.4597299],[40.51879,-74.45985],[40.51871,-74.45998],[40.52201,-74.45672],[40.52196,-74.45672],[40.52189,-74.45672],[40.52181,-74.45674],[40.52394,-74.46422],[40.52404,-74.46419],[40.52512,-74.46339],[40.5252,-74.46338],[40.52527,-74.46341],[40.5257099,-74.46493],[40.52612,-74.46569],[40.50378,-74.45252],[40.50342,-74.45215],[40.51868,-74.46147],[40.51878,-74.46153],[40.51889,-74.46158],[40.51972,-74.46217],[40.52026,-74.4625],[40.5209,-74.4627299],[40.52141,-74.46297],[40.52156,-74.46307],[40.52174,-74.46314],[40.52189,-74.46319],[40.5259,-74.45896],[40.52583,-74.45872],[40.49957,-74.44824],[40.49904,-74.44767],[40.499,-74.4476],[40.49932,-74.44659],[40.49969,-74.44542],[40.49974,-74.44524],[40.49979,-74.44514],[40.5005499,-74.44553],[40.50255,-74.44656],[40.5028099,-74.44682],[40.5039,-74.44883],[40.52583,-74.45872],[40.52567,-74.4582099],[40.5256,-74.4579399],[40.52181,-74.45674],[40.5217,-74.45677],[40.52161,-74.4568],[40.52132,-74.45696],[40.52107,-74.4571],[40.52082,-74.45724],[40.52064,-74.45738],[40.5205,-74.4575],[40.5203,-74.45773],[40.51991,-74.4582],[40.51946,-74.45878],[40.51896,-74.45947],[40.51885,-74.4596399],[40.5039,-74.44883],[40.50402,-74.44906],[40.51436,-74.4663099],[40.51437,-74.46624],[40.51442,-74.46618],[40.50322,-74.45196],[40.49965,-74.44832],[40.51863,-74.46146],[40.51868,-74.46147],[40.49965,-74.44832],[40.49957,-74.44824],[40.50402,-74.44906],[40.50442,-74.4498],[40.50499,-74.4509099],[40.5053399,-74.45144],[40.50549,-74.4517],[40.50562,-74.45181],[40.50575,-74.4518499],[40.5062,-74.4518],[40.50641,-74.45191],[40.50653,-74.45211],[40.50659,-74.45235],[40.5066,-74.45249],[40.50667,-74.45342],[40.50678,-74.45443],[40.5068399,-74.45519],[40.50706,-74.45635],[40.50745,-74.45737],[40.50755,-74.45754],[40.50789,-74.4579399],[40.50815,-74.45823],[40.50866,-74.4586],[40.50898,-74.45878],[40.50963,-74.4589699],[40.50997,-74.459],[40.51016,-74.45901],[40.51131,-74.4589],[40.5124799,-74.45877],[40.51324,-74.45859],[40.51396,-74.45824],[40.51456,-74.45782],[40.51511,-74.45728],[40.5153899,-74.45694],[40.51569,-74.45656],[40.51674,-74.45486],[40.51688,-74.45469],[40.51712,-74.4541799],[40.51735,-74.4537299],[40.5174,-74.45312],[40.51718,-74.45262],[40.51684,-74.45242],[40.51656,-74.45238],[40.5162199,-74.45254],[40.51612,-74.45283],[40.51608,-74.45318],[40.51609,-74.45356],[40.51624,-74.45397],[40.51682,-74.45463],[40.51688,-74.45469],[40.51715,-74.4549399],[40.5173599,-74.45523],[40.51762,-74.45598],[40.5176299,-74.45654],[40.51758,-74.45698],[40.5174499,-74.45734],[40.5167,-74.45846],[40.51653,-74.45884],[40.51648,-74.45933],[40.51648,-74.45937],[40.51636,-74.45938],[40.51608,-74.45941],[40.51587,-74.4595],[40.51574,-74.45968],[40.51546,-74.46071],[40.51522,-74.46155],[40.51514,-74.46192],[40.51506,-74.46231],[40.51502,-74.4625499],[40.51499,-74.46308],[40.51498,-74.46332],[40.51487,-74.46485],[40.51485,-74.46522],[40.51459,-74.46646],[40.51457,-74.4665],[40.51446,-74.46652],[40.51441,-74.46648],[40.51436,-74.4663099],[40.51442,-74.46618],[40.51448,-74.46615],[40.5236,-74.45806],[40.52355,-74.4580299],[40.5234,-74.45796],[40.5234,-74.45796],[40.5233599,-74.4579399],[40.52329,-74.45786],[40.5232699,-74.45775],[40.52323,-74.4576699],[40.52315,-74.45756],[40.52311,-74.45751],[40.52306,-74.4574],[40.52301,-74.45717],[40.52297,-74.45705],[40.5228899,-74.45692],[40.5227999,-74.45686],[40.52253,-74.45679],[40.5222399,-74.4567299],[40.52211,-74.45672],[40.52201,-74.45672],[40.50402,-74.44906],[40.50442,-74.4498],[40.50499,-74.4509099],[40.5053399,-74.45144],[40.50549,-74.4517],[40.50562,-74.45181],[40.50575,-74.4518499],[40.5062,-74.4518],[40.50641,-74.45191],[40.50653,-74.45211],[40.50659,-74.45235],[40.5066,-74.45249],[40.50667,-74.45342],[40.50678,-74.45443],[40.5068399,-74.45519],[40.50706,-74.45635],[40.50745,-74.45737],[40.50755,-74.45754],[40.50789,-74.4579399],[40.50815,-74.45823],[40.50866,-74.4586],[40.50898,-74.45878],[40.50963,-74.4589699],[40.50997,-74.459],[40.51016,-74.45901],[40.51131,-74.4589],[40.5124799,-74.45877],[40.51324,-74.45859],[40.51396,-74.45824],[40.51456,-74.45782],[40.51511,-74.45728],[40.5153899,-74.45694],[40.51569,-74.45656],[40.51674,-74.45486],[40.51688,-74.45469],[40.51712,-74.4541799],[40.51735,-74.4537299],[40.5174,-74.45312],[40.51718,-74.45262],[40.51684,-74.45242],[40.51656,-74.45238],[40.5162199,-74.45254],[40.51612,-74.45283],[40.51608,-74.45318],[40.51609,-74.45356],[40.51624,-74.45397],[40.51682,-74.45463],[40.51688,-74.45469],[40.51715,-74.4549399],[40.5173599,-74.45523],[40.51762,-74.45598],[40.5176299,-74.45654],[40.51758,-74.45698],[40.5174499,-74.45734],[40.5167,-74.45846],[40.51653,-74.45884],[40.51648,-74.45933],[40.51648,-74.45937],[40.51636,-74.45938],[40.51608,-74.45941],[40.51587,-74.4595],[40.51574,-74.45968],[40.51546,-74.46071],[40.51522,-74.46155],[40.51514,-74.46192],[40.50342,-74.45215],[40.50322,-74.45196]]} 
	
	var busRoute2 = drawLine(geojsonlinestring2);
  }

		google.maps.event.addDomListener(window, 'load', initialize);
    </script>

    <script type="text/javascript">
    function readURLToXMLDOM(url) {
    	if (window.XMLHttpRequest)
  		{
  			xhttp=new XMLHttpRequest();
  		}
		else // code for IE5 and IE6
  		{
  			xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  		}
		xhttp.open("GET",url,false);
		xhttp.send();
		xmlDoc=xhttp.responseXML;
	
		return xmlDoc;
	}
	
	var url = "http://webservices.nextbus.com/service/publicXMLFeed?a=rutgers&command=routeConfig";
	var xmlDOM = readURLToXMLDOM(url);
    <!--console.log(xmlDOM);-->
    
	<!--console.log(xmlToJson(xmlDOM));-->

	    var xotree = new XML.ObjTree();
    	var tree = xotree.parseXML(url);
    	<!--console.log("message: "+tree.node);-->
    	
    	<!--console.log(osm2geo(xmlDOM));-->
	</script>
  </head>
  <body>
    <div id="map-canvas"/>
  </body>
</html>